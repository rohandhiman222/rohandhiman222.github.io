<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MongoDb start | CodingDais</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Coding Dais is the best online web, mobile, game development, and programming tutorials for all of the latest web, mobile, game technologies including Node.js, Angular, React.js, Vue.js, Laravel, Django, Spring Boot, Php, Python, Javascript, Java, C# and much more">
    
    <link rel="preload" href="/assets/css/0.styles.bbb302d8.css" as="style"><link rel="preload" href="/assets/js/app.3b0992d7.js" as="script"><link rel="preload" href="/assets/js/2.0d853aab.js" as="script"><link rel="preload" href="/assets/js/1.fc8a768a.js" as="script"><link rel="preload" href="/assets/js/151.659d814b.js" as="script"><link rel="prefetch" href="/assets/js/10.60b29b94.js"><link rel="prefetch" href="/assets/js/100.d6c5d877.js"><link rel="prefetch" href="/assets/js/101.04c759de.js"><link rel="prefetch" href="/assets/js/102.29909f74.js"><link rel="prefetch" href="/assets/js/103.df750c01.js"><link rel="prefetch" href="/assets/js/104.20d6d587.js"><link rel="prefetch" href="/assets/js/105.1af996fb.js"><link rel="prefetch" href="/assets/js/106.d7585a40.js"><link rel="prefetch" href="/assets/js/107.b80c5a69.js"><link rel="prefetch" href="/assets/js/108.cc270e87.js"><link rel="prefetch" href="/assets/js/109.c38e8941.js"><link rel="prefetch" href="/assets/js/11.bcece4c5.js"><link rel="prefetch" href="/assets/js/110.5e8f26a7.js"><link rel="prefetch" href="/assets/js/111.cbca1332.js"><link rel="prefetch" href="/assets/js/112.79ecae8f.js"><link rel="prefetch" href="/assets/js/113.779d5a40.js"><link rel="prefetch" href="/assets/js/114.9c33a7c8.js"><link rel="prefetch" href="/assets/js/115.83f0e986.js"><link rel="prefetch" href="/assets/js/116.56830fc9.js"><link rel="prefetch" href="/assets/js/117.b49d9e2b.js"><link rel="prefetch" href="/assets/js/118.fdf5bbaa.js"><link rel="prefetch" href="/assets/js/119.c4b1084b.js"><link rel="prefetch" href="/assets/js/12.4ef9a524.js"><link rel="prefetch" href="/assets/js/120.1927361b.js"><link rel="prefetch" href="/assets/js/121.eef14f81.js"><link rel="prefetch" href="/assets/js/122.04353f0b.js"><link rel="prefetch" href="/assets/js/123.1cc56f7e.js"><link rel="prefetch" href="/assets/js/124.144e8b31.js"><link rel="prefetch" href="/assets/js/125.6a1dd732.js"><link rel="prefetch" href="/assets/js/126.091384a1.js"><link rel="prefetch" href="/assets/js/127.eaedbf84.js"><link rel="prefetch" href="/assets/js/128.26281f47.js"><link rel="prefetch" href="/assets/js/129.0795d034.js"><link rel="prefetch" href="/assets/js/13.a9b2b61c.js"><link rel="prefetch" href="/assets/js/130.1b0b3507.js"><link rel="prefetch" href="/assets/js/131.a54fcf24.js"><link rel="prefetch" href="/assets/js/132.826ffff1.js"><link rel="prefetch" href="/assets/js/133.eadcc6a7.js"><link rel="prefetch" href="/assets/js/134.2f1e8d4d.js"><link rel="prefetch" href="/assets/js/135.9ca78740.js"><link rel="prefetch" href="/assets/js/136.999cbda0.js"><link rel="prefetch" href="/assets/js/137.baef4ed2.js"><link rel="prefetch" href="/assets/js/138.56332558.js"><link rel="prefetch" href="/assets/js/139.bd6e8c64.js"><link rel="prefetch" href="/assets/js/14.562947fc.js"><link rel="prefetch" href="/assets/js/140.f97c74e1.js"><link rel="prefetch" href="/assets/js/141.7bebf0af.js"><link rel="prefetch" href="/assets/js/142.4fa3c6f5.js"><link rel="prefetch" href="/assets/js/143.16eef2b7.js"><link rel="prefetch" href="/assets/js/144.1576290e.js"><link rel="prefetch" href="/assets/js/145.550cb40f.js"><link rel="prefetch" href="/assets/js/146.5f767fa9.js"><link rel="prefetch" href="/assets/js/147.f3eecaca.js"><link rel="prefetch" href="/assets/js/148.1e3f06aa.js"><link rel="prefetch" href="/assets/js/149.b4379bbe.js"><link rel="prefetch" href="/assets/js/15.58576da3.js"><link rel="prefetch" href="/assets/js/150.1ff29e01.js"><link rel="prefetch" href="/assets/js/152.09e08c5b.js"><link rel="prefetch" href="/assets/js/153.23774f3a.js"><link rel="prefetch" href="/assets/js/154.9a176bac.js"><link rel="prefetch" href="/assets/js/155.fb874038.js"><link rel="prefetch" href="/assets/js/156.da6b82e6.js"><link rel="prefetch" href="/assets/js/157.ca534c5b.js"><link rel="prefetch" href="/assets/js/158.ba647409.js"><link rel="prefetch" href="/assets/js/159.d25c86d0.js"><link rel="prefetch" href="/assets/js/16.295fa0e8.js"><link rel="prefetch" href="/assets/js/160.b2290eab.js"><link rel="prefetch" href="/assets/js/161.33396908.js"><link rel="prefetch" href="/assets/js/162.9ac65f1c.js"><link rel="prefetch" href="/assets/js/163.42d6ea27.js"><link rel="prefetch" href="/assets/js/164.e830383b.js"><link rel="prefetch" href="/assets/js/165.8927d011.js"><link rel="prefetch" href="/assets/js/166.82932277.js"><link rel="prefetch" href="/assets/js/167.c1429237.js"><link rel="prefetch" href="/assets/js/168.14a0fed8.js"><link rel="prefetch" href="/assets/js/169.df47c86a.js"><link rel="prefetch" href="/assets/js/17.fd550f40.js"><link rel="prefetch" href="/assets/js/170.9f54bb7d.js"><link rel="prefetch" href="/assets/js/171.a3921a1b.js"><link rel="prefetch" href="/assets/js/172.3bdba0c8.js"><link rel="prefetch" href="/assets/js/173.7e48222f.js"><link rel="prefetch" href="/assets/js/174.c061eaa0.js"><link rel="prefetch" href="/assets/js/175.e77ce52b.js"><link rel="prefetch" href="/assets/js/176.bffe7997.js"><link rel="prefetch" href="/assets/js/177.87b58a36.js"><link rel="prefetch" href="/assets/js/178.ee57de49.js"><link rel="prefetch" href="/assets/js/179.c11280a2.js"><link rel="prefetch" href="/assets/js/18.576ec237.js"><link rel="prefetch" href="/assets/js/180.2189edc4.js"><link rel="prefetch" href="/assets/js/181.9160443d.js"><link rel="prefetch" href="/assets/js/182.8959092f.js"><link rel="prefetch" href="/assets/js/183.57a5d7c0.js"><link rel="prefetch" href="/assets/js/184.80a83e43.js"><link rel="prefetch" href="/assets/js/185.b6b8b8d7.js"><link rel="prefetch" href="/assets/js/186.821dd42f.js"><link rel="prefetch" href="/assets/js/187.a5a18cdc.js"><link rel="prefetch" href="/assets/js/188.63cdc7a8.js"><link rel="prefetch" href="/assets/js/189.88d38d3a.js"><link rel="prefetch" href="/assets/js/19.92f5cd3c.js"><link rel="prefetch" href="/assets/js/190.c43da60a.js"><link rel="prefetch" href="/assets/js/191.368feeac.js"><link rel="prefetch" href="/assets/js/192.3ca08f6c.js"><link rel="prefetch" href="/assets/js/193.ad5d7f8a.js"><link rel="prefetch" href="/assets/js/194.fc9e87e1.js"><link rel="prefetch" href="/assets/js/195.90414238.js"><link rel="prefetch" href="/assets/js/196.8b44bb2c.js"><link rel="prefetch" href="/assets/js/197.4ad326ff.js"><link rel="prefetch" href="/assets/js/198.6b88b6df.js"><link rel="prefetch" href="/assets/js/199.439f9dfd.js"><link rel="prefetch" href="/assets/js/20.1211d94e.js"><link rel="prefetch" href="/assets/js/200.df391d86.js"><link rel="prefetch" href="/assets/js/201.c517a530.js"><link rel="prefetch" href="/assets/js/21.ff069fa7.js"><link rel="prefetch" href="/assets/js/22.3988e024.js"><link rel="prefetch" href="/assets/js/23.6d93e3e2.js"><link rel="prefetch" href="/assets/js/24.56e6e85a.js"><link rel="prefetch" href="/assets/js/25.bf7c947e.js"><link rel="prefetch" href="/assets/js/26.9678f5db.js"><link rel="prefetch" href="/assets/js/27.3a36bc5b.js"><link rel="prefetch" href="/assets/js/28.24d1a657.js"><link rel="prefetch" href="/assets/js/29.9eeb8a53.js"><link rel="prefetch" href="/assets/js/3.33514a70.js"><link rel="prefetch" href="/assets/js/30.73a4a261.js"><link rel="prefetch" href="/assets/js/31.20031908.js"><link rel="prefetch" href="/assets/js/32.be958e35.js"><link rel="prefetch" href="/assets/js/33.52b5d9ea.js"><link rel="prefetch" href="/assets/js/34.a56cd86a.js"><link rel="prefetch" href="/assets/js/35.2d1736d3.js"><link rel="prefetch" href="/assets/js/36.36c09aca.js"><link rel="prefetch" href="/assets/js/37.0ee473f3.js"><link rel="prefetch" href="/assets/js/38.6928993e.js"><link rel="prefetch" href="/assets/js/39.58dbe550.js"><link rel="prefetch" href="/assets/js/4.3f408848.js"><link rel="prefetch" href="/assets/js/40.0bd49167.js"><link rel="prefetch" href="/assets/js/41.d93788ae.js"><link rel="prefetch" href="/assets/js/42.0c2cb79d.js"><link rel="prefetch" href="/assets/js/43.3d564a40.js"><link rel="prefetch" href="/assets/js/44.f50f3587.js"><link rel="prefetch" href="/assets/js/45.690ef0c8.js"><link rel="prefetch" href="/assets/js/46.8dd6db53.js"><link rel="prefetch" href="/assets/js/47.2716cb5f.js"><link rel="prefetch" href="/assets/js/48.e898ac89.js"><link rel="prefetch" href="/assets/js/49.393be6db.js"><link rel="prefetch" href="/assets/js/5.5cb44e85.js"><link rel="prefetch" href="/assets/js/50.10168859.js"><link rel="prefetch" href="/assets/js/51.8d69aa2f.js"><link rel="prefetch" href="/assets/js/52.6956964b.js"><link rel="prefetch" href="/assets/js/53.a776ea5f.js"><link rel="prefetch" href="/assets/js/54.b4479b2a.js"><link rel="prefetch" href="/assets/js/55.6dc4a8a0.js"><link rel="prefetch" href="/assets/js/56.3e964f8a.js"><link rel="prefetch" href="/assets/js/57.2dc6f375.js"><link rel="prefetch" href="/assets/js/58.89e505ba.js"><link rel="prefetch" href="/assets/js/59.3315cea5.js"><link rel="prefetch" href="/assets/js/6.00b8267b.js"><link rel="prefetch" href="/assets/js/60.b0ea338f.js"><link rel="prefetch" href="/assets/js/61.cde17f0c.js"><link rel="prefetch" href="/assets/js/62.ceff194d.js"><link rel="prefetch" href="/assets/js/63.94f5252b.js"><link rel="prefetch" href="/assets/js/64.e33df01f.js"><link rel="prefetch" href="/assets/js/65.f3474f91.js"><link rel="prefetch" href="/assets/js/66.c885375a.js"><link rel="prefetch" href="/assets/js/67.4f2a51e6.js"><link rel="prefetch" href="/assets/js/68.5a7e4601.js"><link rel="prefetch" href="/assets/js/69.07e92d84.js"><link rel="prefetch" href="/assets/js/7.5b9b1097.js"><link rel="prefetch" href="/assets/js/70.37e39c41.js"><link rel="prefetch" href="/assets/js/71.12d7dfdf.js"><link rel="prefetch" href="/assets/js/72.f2f56d31.js"><link rel="prefetch" href="/assets/js/73.1746b74d.js"><link rel="prefetch" href="/assets/js/74.de4864db.js"><link rel="prefetch" href="/assets/js/75.c586d7de.js"><link rel="prefetch" href="/assets/js/76.2daa44d7.js"><link rel="prefetch" href="/assets/js/77.41fc2854.js"><link rel="prefetch" href="/assets/js/78.6adfdd84.js"><link rel="prefetch" href="/assets/js/79.0d6a8fd3.js"><link rel="prefetch" href="/assets/js/80.5708d22f.js"><link rel="prefetch" href="/assets/js/81.171343bf.js"><link rel="prefetch" href="/assets/js/82.1859447e.js"><link rel="prefetch" href="/assets/js/83.e439472f.js"><link rel="prefetch" href="/assets/js/84.c2138ed2.js"><link rel="prefetch" href="/assets/js/85.f1be2b3e.js"><link rel="prefetch" href="/assets/js/86.456d2de5.js"><link rel="prefetch" href="/assets/js/87.fad7f0b3.js"><link rel="prefetch" href="/assets/js/88.f6dda9ef.js"><link rel="prefetch" href="/assets/js/89.dae7f305.js"><link rel="prefetch" href="/assets/js/90.ea736647.js"><link rel="prefetch" href="/assets/js/91.df0f1f76.js"><link rel="prefetch" href="/assets/js/92.34ee06a4.js"><link rel="prefetch" href="/assets/js/93.2ab71009.js"><link rel="prefetch" href="/assets/js/94.a3ff7372.js"><link rel="prefetch" href="/assets/js/95.2366a53c.js"><link rel="prefetch" href="/assets/js/96.2cab3bd1.js"><link rel="prefetch" href="/assets/js/97.c1be0fdd.js"><link rel="prefetch" href="/assets/js/98.891b5f9f.js"><link rel="prefetch" href="/assets/js/99.2680bb4a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d098b00c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.bbb302d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">CodingDais</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Clouds" class="dropdown-title"><span class="title">Clouds</span> <span class="arrow down"></span></button> <button type="button" aria-label="Clouds" class="mobile-dropdown-title"><span class="title">Clouds</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aws/" class="nav-link">
  Aws
</a></li><li class="dropdown-item"><!----> <a href="/digitalocean/" class="nav-link">
  Digital Ocean
</a></li><li class="dropdown-item"><!----> <a href="/hackerrank/" class="nav-link">
  Hacker Rank
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Framework" class="dropdown-title"><span class="title">Framework</span> <span class="arrow down"></span></button> <button type="button" aria-label="Framework" class="mobile-dropdown-title"><span class="title">Framework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  Other
</a></li><li class="dropdown-item"><!----> <a href="/vuejs/" class="nav-link">
  Vuejs
</a></li><li class="dropdown-item"><!----> <a href="/reactjs/" class="nav-link">
  Reactjs
</a></li><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/laravel/" class="nav-link">
  Laravel
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/csharp/" class="nav-link">
  Csharp
</a></li><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/ts/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/mongodb/" class="nav-link router-link-active">
  MongoDb
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools" class="dropdown-title"><span class="title">Tools</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tools" class="mobile-dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/#git-github" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/#ssh-besic" class="nav-link">
  SSH
</a></li><li class="dropdown-item"><!----> <a href="/tools/#docker" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/tools/#crome-extension" class="nav-link">
  Crome Extension
</a></li><li class="dropdown-item"><!----> <a href="/tools/linux.html" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><a href="/resume/" class="nav-link">
  Contact
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Clouds" class="dropdown-title"><span class="title">Clouds</span> <span class="arrow down"></span></button> <button type="button" aria-label="Clouds" class="mobile-dropdown-title"><span class="title">Clouds</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/aws/" class="nav-link">
  Aws
</a></li><li class="dropdown-item"><!----> <a href="/digitalocean/" class="nav-link">
  Digital Ocean
</a></li><li class="dropdown-item"><!----> <a href="/hackerrank/" class="nav-link">
  Hacker Rank
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Framework" class="dropdown-title"><span class="title">Framework</span> <span class="arrow down"></span></button> <button type="button" aria-label="Framework" class="mobile-dropdown-title"><span class="title">Framework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/flutter/" class="nav-link">
  Flutter
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  Other
</a></li><li class="dropdown-item"><!----> <a href="/vuejs/" class="nav-link">
  Vuejs
</a></li><li class="dropdown-item"><!----> <a href="/reactjs/" class="nav-link">
  Reactjs
</a></li><li class="dropdown-item"><!----> <a href="/reactnative/" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/nodejs/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/laravel/" class="nav-link">
  Laravel
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/css/" class="nav-link">
  Css
</a></li><li class="dropdown-item"><!----> <a href="/csharp/" class="nav-link">
  Csharp
</a></li><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">
  Javascript
</a></li><li class="dropdown-item"><!----> <a href="/ts/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/mongodb/" class="nav-link router-link-active">
  MongoDb
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Tools" class="dropdown-title"><span class="title">Tools</span> <span class="arrow down"></span></button> <button type="button" aria-label="Tools" class="mobile-dropdown-title"><span class="title">Tools</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/#git-github" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/#ssh-besic" class="nav-link">
  SSH
</a></li><li class="dropdown-item"><!----> <a href="/tools/#docker" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/tools/#crome-extension" class="nav-link">
  Crome Extension
</a></li><li class="dropdown-item"><!----> <a href="/tools/linux.html" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><a href="/resume/" class="nav-link">
  Contact
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/mongodb/" aria-current="page" class="sidebar-link">MongoDb Besci</a></li><li><a href="/mongodb/newStart.html" aria-current="page" class="active sidebar-link">MongoDb start</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mongodb/newStart.html#mongodb-start" class="sidebar-link">MongoDb start</a></li></ul></li><li><a href="/mongodb/newStart2.html" class="sidebar-link">JSON Data types</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="mongodb-start"><a href="#mongodb-start" class="header-anchor">#</a> MongoDb start</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
show dbs 
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
create or select <span class="token parameter">database</span> <span class="token operator">=&gt;</span> use flights 
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>

<span class="token keyword">if</span> you create entry automatic created flights database

<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
insert database single

db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span>
 
        <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;departureAirport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MUC&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;arrivalAirport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SFO&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;aircraft&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Airbus A380&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;distance&quot;</span><span class="token operator">:</span> <span class="token number">12000</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;intercontinental&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
insert database multiple

db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span>
 
       <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;departureAirport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MUC&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;arrivalAirport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SFO&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;aircraft&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Airbus A380&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;distance&quot;</span><span class="token operator">:</span> <span class="token number">12000</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;intercontinental&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;departureAirport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;LHR&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;arrivalAirport&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TXL&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;aircraft&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Airbus A320&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;distance&quot;</span><span class="token operator">:</span> <span class="token number">950</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;intercontinental&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>

<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span>
show collection data 
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span>

db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> options<span class="token punctuation">)</span>



<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
crud system
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span>

Create 
<span class="token function">insertOne</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token function">insertMany</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> options<span class="token punctuation">)</span>

Read
<span class="token function">find</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token function">findOne</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> options<span class="token punctuation">)</span>

Greater than filter 
db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">distance</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">10000</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// curser default 20</span>
 db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// all ducuments</span>
db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">printjson</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// will not work</span>

<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
Projection
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
 db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// default id also remove</span>





Update 
<span class="token function">updateOne</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> data<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token function">updateMany</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> data<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token function">replaceOne</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> data<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">distance</span><span class="token operator">:</span><span class="token number">950</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">marker</span><span class="token operator">:</span><span class="token string">&quot;delete&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">marker</span><span class="token operator">:</span><span class="token string">&quot;delete&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

embedded data 
Object
db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">status</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">description</span><span class="token operator">:</span><span class="token string">&quot;on-time&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">lastUpdate</span><span class="token operator">:</span><span class="token string">&quot;1 hour ago&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// filter object you can go more deep like this </span>
db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;status.description&quot;</span><span class="token operator">:</span><span class="token string">&quot;on-time&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

Array
db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;Albert Twostone&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;sports&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cooking&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;reading&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

Only hobbies access
db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;Albert Twostone&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hobbies

hobbies filter automatic filter search <span class="token keyword">in</span> array 
 db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token string">&quot;sports&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;Albert Twostone&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;sports&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;cooking&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;reading&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">date</span><span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">insertedAt</span><span class="token operator">:</span><span class="token keyword">new</span> <span class="token class-name">Timestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

Delete 
<span class="token keyword">delete</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
<span class="token function">deleteMany</span><span class="token punctuation">(</span>filter<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
 db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">deleteOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">distance</span><span class="token operator">:</span><span class="token number">12000</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">marker</span><span class="token operator">:</span><span class="token string">&quot;delete&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>




<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
Data types
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
Text<span class="token punctuation">,</span>
<span class="token string">&quot;Rohan&quot;</span>
Boolean<span class="token punctuation">,</span> 
<span class="token boolean">true</span>
Number<span class="token punctuation">,</span> 
<span class="token function">Integer</span><span class="token punctuation">(</span>int32<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">NumberLong</span><span class="token punctuation">(</span>int64<span class="token punctuation">)</span><span class="token punctuation">,</span> NumberDecimal<span class="token punctuation">,</span>
<span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;helle&quot;</span><span class="token punctuation">)</span>
ISODate
<span class="token function">ISODate</span><span class="token punctuation">(</span><span class="token string">&quot;date here&quot;</span><span class="token punctuation">)</span>
Timestamp
<span class="token function">Timestamp</span><span class="token punctuation">(</span><span class="token number">234234324</span><span class="token punctuation">)</span>
Embedded Document
<span class="token punctuation">{</span><span class="token string-property property">&quot;a&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
Array 
<span class="token punctuation">{</span><span class="token string-property property">&quot;b&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">}</span>


<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
know everything how many collection<span class="token punctuation">,</span> size  inside 
db<span class="token punctuation">.</span><span class="token function">stats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// check type of field</span>
<span class="token keyword">typeof</span> db<span class="token punctuation">.</span>flightsData<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>distance
all types here 
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>com<span class="token operator">/</span>docs<span class="token operator">/</span>manual<span class="token operator">/</span>reference<span class="token operator">/</span>bson<span class="token operator">-</span>types<span class="token operator">/</span>



<span class="token comment">/// one to one relation no need extra collection use embadded </span>


<span class="token comment">// joining with $lookup use</span>

db<span class="token punctuation">.</span>authors<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;rohan&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">342</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;javeen&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">343</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

db<span class="token punctuation">.</span>books<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;english teaching&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">author</span><span class="token operator">:</span><span class="token punctuation">[</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;62c97a2e79ff705516dc590a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;math&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">author</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;62c97a2e79ff705516dc590b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token comment">// both join working properly</span>
db<span class="token punctuation">.</span>books<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">$lookup</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">from</span><span class="token operator">:</span><span class="token string">&quot;authors&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">localField</span><span class="token operator">:</span><span class="token string">&quot;author&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">foreignField</span><span class="token operator">:</span><span class="token string">&quot;_id&quot;</span><span class="token punctuation">,</span> <span class="token keyword">as</span><span class="token operator">:</span> <span class="token string">&quot;creaters&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


db<span class="token punctuation">.</span>authors<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">$lookup</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">from</span><span class="token operator">:</span><span class="token string">&quot;books&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">localField</span><span class="token operator">:</span><span class="token string">&quot;_id&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">foreignField</span><span class="token operator">:</span><span class="token string">&quot;author&quot;</span><span class="token punctuation">,</span> <span class="token keyword">as</span><span class="token operator">:</span> <span class="token string">&quot;books&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">// create blog</span>
db<span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;my first post&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">tags</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'new'</span><span class="token punctuation">,</span><span class="token string">'tech'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">creator</span><span class="token operator">:</span><span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;author id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">comments</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">text</span><span class="token operator">:</span><span class="token string">&quot;i like your post&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">author</span><span class="token operator">:</span><span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;author id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>



<span class="token comment">// create collection with validation in mongodb</span>
db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">'posts'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">validator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">$jsonSchema</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'creator'</span><span class="token punctuation">,</span> <span class="token string">'comments'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be a string and is required'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be a string and is required'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">creator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'objectId'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be an objectid and is required'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">comments</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'array'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be an array and is required'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'author'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be a string and is required'</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'objectId'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be an objectid and is required'</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token comment">// modify collection created validation</span>

db<span class="token punctuation">.</span><span class="token function">runCommand</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">collMod</span><span class="token operator">:</span> <span class="token string">'posts'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">validator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">$jsonSchema</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'creator'</span><span class="token punctuation">,</span> <span class="token string">'comments'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be a string and is required'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be a string and is required'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">creator</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'objectId'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be an objectid and is required'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">comments</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'array'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be an array and is required'</span><span class="token punctuation">,</span>
          <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'object'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'author'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be a string and is required'</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">bsonType</span><span class="token operator">:</span> <span class="token string">'objectId'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">'must be an objectid and is required'</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">validationAction</span><span class="token operator">:</span> <span class="token string">'warn'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// working in mac</span>
 mongo <span class="token operator">--</span>dbpath <span class="token constant">C</span><span class="token operator">:</span>\Users\<span class="token number">91999</span>\Documents\mongodbdata <span class="token operator">--</span>logpath <span class="token constant">C</span><span class="token operator">:</span>\Users\<span class="token number">91999</span>\Documents\mongodblogs


<span class="token comment">// insert method accept single and multple both problem it will not return id</span>



<span class="token comment">// order is very important</span>
db<span class="token punctuation">.</span>authors<span class="token punctuation">.</span><span class="token function">insertMany</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">434</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;good&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">434</span><span class="token punctuation">,</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;hwoowo&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">ordered</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>



<span class="token comment">// advance query </span>
 equal <span class="token number">60</span>
 db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
 
 not equal <span class="token number">60</span>
  db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$ne</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

greater than 
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gte</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$lt</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$lte</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$eq
	
Matches values that are equal to a specified value<span class="token punctuation">.</span>
$gt
	
Matches values that are greater than a specified value<span class="token punctuation">.</span>
$gte
	
Matches values that are greater than or equal to a specified value<span class="token punctuation">.</span>
$<span class="token keyword">in</span>
	
Matches any <span class="token keyword">of</span> the values specified <span class="token keyword">in</span> an array<span class="token punctuation">.</span>
$lt
	
Matches values that are less than a specified value<span class="token punctuation">.</span>
$lte
	
Matches values that are less than or equal to a specified value<span class="token punctuation">.</span>
$ne
	
Matches all values that are not equal to a specified value<span class="token punctuation">.</span>
$nin
	
Matches none <span class="token keyword">of</span> the values specified <span class="token keyword">in</span> an array<span class="token punctuation">.</span>



<span class="token comment">// emdeded object search</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>rating<span class="token punctuation">.</span>average<span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// array search in array</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">genres</span><span class="token operator">:</span><span class="token string">&quot;Drama&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// only array same</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">genres</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;Drama&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// in </span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token punctuation">{</span>$<span class="token keyword">in</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


except <span class="token keyword">in</span> show all <span class="token keyword">in</span> opposite
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$nin</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

or condition 
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$or</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;rating.average&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$lt</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;rating.average&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">9.3</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

nor mean except both condition show all 
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$nor</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;rating.average&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$lt</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;rating.average&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">9.3</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// and </span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$and</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;genres&quot;</span><span class="token operator">:</span><span class="token string">&quot;Drama&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;rating.average&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// both are same working like and</span>
one problme <span class="token keyword">in</span> <span class="token keyword">this</span> same name key object not work 
generes already there <span class="token keyword">if</span> again put genres condition got error <span class="token keyword">in</span> 
<span class="token keyword">this</span> <span class="token keyword">case</span> use $and 
override <span class="token keyword">if</span> u use double genres key <span class="token keyword">with</span> and
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;genres&quot;</span><span class="token operator">:</span><span class="token string">&quot;Drama&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;rating.average&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// not equal both query will work</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$not</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$eq</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$ne</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// check if field exits send data otherwise don't </span>
<span class="token comment">// if null value exits u also got value</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$exists</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$exists</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">$ne</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$exists</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span>$gt<span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
opposite
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$exists</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// $type use for if phone number string or number that time we use</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">phone</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$type</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;double&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

$regex  same like 
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">summary</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$regex</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">musical</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>





<span class="token comment">// aggregate with $match like find method</span>
db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">$match</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token string">&quot;female&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//expr use for compare two fields check one field is valume second target if you want target is greater than valume so use this method</span>

db<span class="token punctuation">.</span>sales<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$expr</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;$volume&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;$target&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> condition inside
db<span class="token punctuation">.</span>sales<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$expr</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">$cond</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gte</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;$volume&quot;</span><span class="token punctuation">,</span><span class="token number">190</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">then</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$subtract</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;$volume&quot;</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">else</span><span class="token operator">:</span><span class="token string">&quot;$volume&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;$target&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

search embadded array object 
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;hobbies.title&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Sports&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// find who have 3 hobbies only support exact match</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$size</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// $all use when we search hobbies  multiple order should be after that work if order not match you can't get</span>
<span class="token string">&quot;sport&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;action&quot;</span> <span class="token keyword">if</span> have other same order you can search 
<span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sport&quot;</span> will  not search <span class="token keyword">if</span> you want search any order use $all 


<span class="token comment">// this will not work proparly </span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">genre</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;thriller&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// this will work</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">genre</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$all</span><span class="token operator">:</span><span class="token punctuation">[</span> <span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;thriller&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// problems</span>
not work hobbies<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token string">&quot;32423&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token keyword">if</span> you want to add title<span class="token punctuation">,</span> frequency add both condition will not work use $elemMatch 

db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$elemMatch</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;Sport&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gte</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>



<span class="token comment">// cursors</span>
<span class="token function">find</span><span class="token punctuation">(</span>Cursor<span class="token punctuation">)</span> attach

 <span class="token keyword">const</span> movies <span class="token operator">=</span> db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 movies<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 movies<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 movies<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 movies<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// you can also filter here.</span>
 movies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">doc</span> <span class="token operator">=&gt;</span><span class="token function">printjson</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token comment">// sorts</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;rating.average&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// skip and limit </span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>


<span class="token comment">// projection</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">runtime</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">rating</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// projection in array</span>
<span class="token comment">// get only drama</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">genres</span><span class="token operator">:</span><span class="token string">&quot;Drama&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;genres.$&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">genres</span><span class="token operator">:</span><span class="token string">&quot;Drama&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">genres</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$elemMatch</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$eq</span><span class="token operator">:</span><span class="token string">&quot;Horror&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">// slice array two value</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;ratting.average&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">9</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">genres</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$slice</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// skip also work</span>
db<span class="token punctuation">.</span>movies<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;ratting.average&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">genres</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$slice</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

$unset remove fields
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$unset</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">phone</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// rename fields</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$rename</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&quot;totalAge&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// upsert mean if user not found create new user awesome</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;Rohan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;good food&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">isSporty</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">upsert</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// update only selected field access by $ n create new fields</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$elemMatch</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;Sports&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gte</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$set</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;hobbies.$.highFrequency&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// update all frequency</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$inc</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;hobbies.$[].frequency&quot;</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// push</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;rohan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$push</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;Sport&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// multiple push</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;rohan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$push</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$each</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;good&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;hiking&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// slice multiple n sort</span>


db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;rohan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$push</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$each</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;good&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;hiking&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">$sort</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">$slice</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

remove from array
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;rohan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$pull</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;hiking&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// last hobbies remove from array 1 mean last -1 mean first </span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;rohan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$pop</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// add to array stop duplicate only set unique value</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;rohan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">$addToSet</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;Hiking&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">frequency</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span> 


<span class="token comment">// remove </span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">deleteOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;rohan&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">isSporty</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">deleteMany</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$exits</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">isSporty</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>



<span class="token comment">// remove collections</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

remove database

db<span class="token punctuation">.</span><span class="token function">dropDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


speed check
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">explain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;dob.age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">explain</span><span class="token punctuation">(</span><span class="token string">&quot;executionStats&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;dob.age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// create index 1 -1 </span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;dob.age&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// remove index</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;dob.age&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// create one index multi field</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;dob.age&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// get index</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">getIndexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create partional index</span>
db<span class="token punctuation">.</span>users<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">&quot;dob.age&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">partialFilterExpression</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;dob.age&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token number">60</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// create for text search text index</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">description</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
search like <span class="token keyword">this</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$text</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$search</span><span class="token operator">:</span><span class="token string">&quot;awesome&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// search phase mean search both word</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$text</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$search</span><span class="token operator">:</span><span class="token string">&quot;\&quot;red book&quot;</span>\&quot;<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// search first who have many matches</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$text</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$search</span><span class="token operator">:</span><span class="token string">&quot;awesome t-shirt&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">score</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$meta</span><span class="token operator">:</span><span class="token string">&quot;textScore&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$text</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$search</span><span class="token operator">:</span><span class="token string">&quot;awesome t-shirt&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">score</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$meta</span><span class="token operator">:</span><span class="token string">&quot;textScore&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">score</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$meta</span><span class="token operator">:</span><span class="token string">&quot;textScore&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

note here <span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span>
text index create only one field <span class="token keyword">in</span> collection you can't create multiple 

<span class="token comment">// remove index by name also </span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token string">&quot;description_text&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//create mutliple index text with one index</span>
search both table 
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">description</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// search with include t-shirt </span>
<span class="token comment">// put minus symbal like this -t-shirt</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$text</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$search</span><span class="token operator">:</span><span class="token string">&quot;awesome -t-shirt&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// caseSensitive on</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">$text</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$search</span><span class="token operator">:</span><span class="token string">&quot;awesome -t-shirt&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">$caseSensitive</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// create index with weight and language</span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">description</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">default_language</span><span class="token operator">:</span><span class="token string">&quot;english&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">weights</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">description</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">//create index in backgound it will not lock your collection because i someone getting data from the collection it will freeze after finish you can get data so solution is here use background by default false </span>
db<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">background</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// geo location structure</span>
<span class="token string-property property">&quot;location&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;coordinates&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
   
  
     longitude<span class="token punctuation">,</span> 
       latitude<span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// create index for geo location</span>
db<span class="token punctuation">.</span>places<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">location</span><span class="token operator">:</span><span class="token string">&quot;2dsphere&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

find near by 
db<span class="token punctuation">.</span>places<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">location</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$near</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$geometry</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span>longitude<span class="token punctuation">,</span> latitude<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">$maxDistance</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token literal-property property">$minDistance</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// search in shape</span>
<span class="token keyword">const</span> p1 <span class="token punctuation">[</span> longitude<span class="token punctuation">,</span> latitude<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p2 <span class="token punctuation">[</span> longitude<span class="token punctuation">,</span> latitude<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p3 <span class="token punctuation">[</span> longitude<span class="token punctuation">,</span> latitude<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p4 <span class="token punctuation">[</span> longitude<span class="token punctuation">,</span> latitude<span class="token punctuation">]</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>places<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">location</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$geoWithin</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$geometry</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Polygon&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">,</span>p3<span class="token punctuation">,</span>p4<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">// store area in database and check how many user there</span>
db<span class="token punctuation">.</span>areas<span class="token punctuation">.</span><span class="token function">insertOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;Medical enclave&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">area</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Polygon&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">,</span>p3<span class="token punctuation">,</span>p4<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// create index </span>
db<span class="token punctuation">.</span>areas<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">area</span><span class="token operator">:</span><span class="token string">&quot;2dsphere&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

db<span class="token punctuation">.</span>areas<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">area</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$geoIntersects</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$geometry</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span>longitude<span class="token punctuation">,</span> latitude<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// find in with radius</span>

db<span class="token punctuation">.</span>places<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">location</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$geoWithin</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$centerSphere</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span>longitude<span class="token punctuation">,</span> latitude<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">6378.1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>





<span class="token comment">// aggregation framework</span>

aggregate same find give us more advance features 
<span class="token parameter">collection</span> <span class="token operator">=&gt;</span> <span class="token parameter">match</span> <span class="token operator">=&gt;</span> <span class="token parameter">sort</span> <span class="token operator">=&gt;</span> <span class="token parameter">group</span> <span class="token operator">=&gt;</span> <span class="token parameter">project</span> <span class="token operator">=&gt;</span> output result

every state receives the output <span class="token keyword">of</span> the  previous stage

aggregate take array first we got all data here after second step use can anything <span class="token keyword">with</span> that data 
$first is where candition like find 

both are same 
db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token string">&quot;female&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">$match</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token string">&quot;female&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$group state<span class="token punctuation">,</span> sort 

db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$match</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token string">&quot;female&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span><span class="token literal-property property">$group</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">stateAnyKey</span><span class="token operator">:</span><span class="token string">&quot;$location.state&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">totalPersons</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$sum</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span><span class="token literal-property property">$sort</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">totalPersons</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


$projection

<span class="token comment">// make contact full name</span>
db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
 <span class="token punctuation">{</span> <span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">fullName</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$concat</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;Testing &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;$name.first&quot;</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;$name.last&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// all character upper case</span>
db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
 <span class="token punctuation">{</span> <span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">fullName</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$concat</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;Testing &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.first&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.last&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// geojson</span>

db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">location</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token string">&quot;$location.coordinates.longitude&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;$location.coordinates.latitude&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span> <span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">location</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">fullName</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$concat</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;Testing &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.first&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.last&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// convert string to double with input and to</span>

db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">location</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">$convert</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">input</span><span class="token operator">:</span><span class="token string">&quot;$location.coordinates.longitude&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span><span class="token string">&quot;double&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">onError</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token literal-property property">onNull</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;$location.coordinates.latitude&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span> <span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">location</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">fullName</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$concat</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;Testing &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.first&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.last&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/// create new fields and also change name dob.date </span>

db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">birthDate</span><span class="token operator">:</span><span class="token string">&quot;$dob.date&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">location</span><span class="token operator">:</span>
  <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">$convert</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">input</span><span class="token operator">:</span><span class="token string">&quot;$location.coordinates.longitude&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span><span class="token string">&quot;double&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">onError</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token literal-property property">onNull</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;$location.coordinates.latitude&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span> <span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">birthDate</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">location</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">fullName</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$concat</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;Testing &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.first&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.last&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// project and group two togetter use</span>


db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&quot;$dob.age&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">birthDate</span><span class="token operator">:</span><span class="token string">&quot;$dob.date&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">location</span><span class="token operator">:</span>
  <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">$convert</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">input</span><span class="token operator">:</span><span class="token string">&quot;$location.coordinates.longitude&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span><span class="token string">&quot;double&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">onError</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token literal-property property">onNull</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;$location.coordinates.latitude&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span> <span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">birthDate</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">location</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">fullName</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$concat</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;Testing &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.first&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.last&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span>
  <span class="token literal-property property">$group</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;ageGroup&quot;</span><span class="token operator">:</span><span class="token string">&quot;$age&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


sum all age 


db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> 
  <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&quot;$dob.age&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">birthDate</span><span class="token operator">:</span><span class="token string">&quot;$dob.date&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">location</span><span class="token operator">:</span>
  <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span><span class="token literal-property property">$convert</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">input</span><span class="token operator">:</span><span class="token string">&quot;$location.coordinates.longitude&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">to</span><span class="token operator">:</span><span class="token string">&quot;double&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">onError</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token literal-property property">onNull</span><span class="token operator">:</span><span class="token number">0.0</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">&quot;$location.coordinates.latitude&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span> <span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">birthDate</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">email</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">location</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">fullName</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$concat</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;Testing &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.first&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">$toUpper</span><span class="token operator">:</span><span class="token string">&quot;$name.last&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token punctuation">{</span>
  <span class="token literal-property property">$group</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">&quot;ageGroup&quot;</span><span class="token operator">:</span><span class="token string">&quot;$age&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">numPerson</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$sum</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$group mean n<span class="token operator">:</span><span class="token number">1</span> 
multiple convert into one 
Sum<span class="token punctuation">,</span> Count<span class="token punctuation">,</span> Average<span class="token punctuation">,</span> Build Array 


$project mean<span class="token operator">:</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span>
incude<span class="token operator">/</span>exculde fields<span class="token punctuation">,</span> transform <span class="token function">fields</span> <span class="token punctuation">(</span>within a single document<span class="token punctuation">)</span>


db<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$unwind</span><span class="token operator">:</span><span class="token string">&quot;$hobbies&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token punctuation">{</span><span class="token literal-property property">$group</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token string">&quot;$age&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">allHobbies</span><span class="token operator">:</span>
   <span class="token comment">// {$addToSet:&quot;$hobbies&quot;}}} // or unique</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$push</span><span class="token operator">:</span><span class="token string">&quot;$hobbies&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// slice some array i mean get one array</span>
examScore array <span class="token keyword">get</span> only first value 
examScore array <span class="token keyword">get</span> onst last value <span class="token operator">-</span><span class="token number">1</span>
examScore array start value and how many value
 <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">examScore</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$slice</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;$examScore&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

db<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">examScore</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$slice</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;$examScore&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>



size <span class="token keyword">of</span> length array 
 db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">numHobbies</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$size</span><span class="token operator">:</span><span class="token string">&quot;$hobbies&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>


 filter use <span class="token keyword">with</span> $$ 
 db<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
  <span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">scores</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filter</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">input</span><span class="token operator">:</span><span class="token string">&quot;$examScores&quot;</span><span class="token punctuation">,</span> <span class="token keyword">as</span> <span class="token string">&quot;sc&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">cond</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$gt</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;$$sc.score&quot;</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

don't use field name $ only use <span class="token keyword">with</span> value name 
<span class="token comment">// hobbies unwind</span>
<span class="token comment">// $first print other fields fields</span>
$push<span class="token punctuation">,</span> addToSet
db<span class="token punctuation">.</span>passengers<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$unwind</span><span class="token operator">:</span><span class="token string">&quot;$hobbies&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">age</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">hobbies</span><span class="token operator">:</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$group</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token string">&quot;$_id&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">ages</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$first</span><span class="token operator">:</span><span class="token string">&quot;$age&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

$bucket create bucket mean groups <span class="token keyword">of</span> objects 
db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">$bucket</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">groupBy</span><span class="token operator">:</span><span class="token string">&quot;$dob.age&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">boundaries</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">numPersons</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$sum</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">averageAge</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$avg</span><span class="token operator">:</span><span class="token string">&quot;$dob.age&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token comment">// auto bucket</span>
db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">$bucketAuto</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">groupBy</span><span class="token operator">:</span><span class="token string">&quot;$dob.age&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">bucket</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span>
      <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">numPersons</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$sum</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">averageAge</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">$avg</span><span class="token operator">:</span><span class="token string">&quot;$dob.age&quot;</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>


<span class="token comment">// limit</span>
db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$sort</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$limit</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>


db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$sort</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$skip</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span><span class="token literal-property property">$limit</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>


db<span class="token punctuation">.</span>persons<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$match</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token string">&quot;mail&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$project</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">_id</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$sort</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$skip</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span><span class="token literal-property property">$limit</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>


db<span class="token punctuation">.</span>places<span class="token punctuation">.</span><span class="token function">aggregate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span><span class="token literal-property property">$geoNear</span><span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token literal-property property">near</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">&quot;Point&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">coordinates</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">34</span><span class="token punctuation">,</span><span class="token number">34</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">maxDistance</span><span class="token operator">:</span><span class="token number">10000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">num</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token literal-property property">query</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">gender</span><span class="token operator">:</span><span class="token string">&quot;feale&quot;</span>      
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">distanceField</span><span class="token operator">:</span><span class="token string">&quot;distance&quot;</span>

  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/mongodb/" class="prev router-link-active">
        MongoDb Besci
      </a></span> <span class="next"><a href="/mongodb/newStart2.html">
        JSON Data types
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3b0992d7.js" defer></script><script src="/assets/js/2.0d853aab.js" defer></script><script src="/assets/js/1.fc8a768a.js" defer></script><script src="/assets/js/151.659d814b.js" defer></script>
  </body>
</html>
