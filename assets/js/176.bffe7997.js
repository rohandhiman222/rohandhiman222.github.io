(window.webpackJsonp=window.webpackJsonp||[]).push([[176],{460:function(n,s,t){"use strict";t.r(s);var a=t(14),e=Object(a.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[n._v("#")]),n._v(" nginx")]),n._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" update\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" nginx\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" mysql-server\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" mysql_secure_installation\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# Press y|Y for Yes, any other key for No: no")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# New password: root")]),n._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# Remove anonymous users? (Press y|Y for Yes, any other key for No) : y")]),n._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# Disallow root login remotely? (Press y|Y for Yes, any other key for No) : y")]),n._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# Remove test database and access to it? (Press y|Y for Yes, any other key for No) : y")]),n._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# Reload privilege tables now? (Press y|Y for Yes, any other key for No) : y")]),n._v("\n\n\n\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" mysql\nSELECT user, authentication_string,plugin,host FROM mysql.user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\nALTER "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[n._v("USER")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'root'")]),n._v("@"),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'localhost'")]),n._v(" IDENTIFIED with mysql_native_password BY "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'mypass'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# check root pass")]),n._v("\nSELECT user, authentication_string,plugin,host FROM mysql.user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\nFLUSH PRIVILEGES"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("exit")]),n._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" php-fpm php-mysql\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# modeify")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("nano")]),n._v(" /etc/nginx/sites-available/default\n\nindex.php\nserver_name "),s("span",{pre:!0,attrs:{class:"token number"}},[n._v("10.161")]),n._v(".7.244"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n location ~ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v(".php$ "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n                include snippets/fastcgi-php.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n                fastcgi_pass unix:/var/run/php/php7.4-fpm.sock"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n         location ~ /"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v(".ht "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n                deny all"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# check configuratation work fine")]),n._v("\n\nnginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-t")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# nginx: the configuration file /etc/nginx/nginx.conf syntax is ok")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# nginx: configuration file /etc/nginx/nginx.conf test is successful")]),n._v("\n\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# run this command")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" systemctl reload nginx\n\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("nano")]),n._v(" /var/www/html/info.php\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" phpmyadmin\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# don't select any server")]),n._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("ln")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-s")]),n._v(" /usr/share/phpmyadmin /var/www/html\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" phpenmod mcrypt\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-i")]),n._v("\nsystemctl restart php7.4-fpm.service\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# change default phpmyadmin url")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("cd")]),n._v(" /var/www/html\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("mv")]),n._v(" phpmyadmin hidedbname\n\n\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# multi secure phpmyadmin")]),n._v("\nopenssl "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("passwd")]),n._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("nano")]),n._v(" /etc/nginx/pma_pass\nbob:5kBwyB3WMew8Y\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("nano")]),n._v(" /etc/nginx/sites-available/default\nlocation /hidedb "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n                auth_basic "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v('"Admin Login"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n                auth_basic_user_file /etc/nginx/pma_pass\n\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("service")]),n._v(" nginx restart\n\n\n\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("sudo")]),n._v(" mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[n._v("-p")]),n._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# create db")]),n._v("\nCREATE DATABASE wordpress DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\nGRANT ALL ON wordpress.* TO "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'wordpressuser'")]),n._v("@"),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'localhost'")]),n._v(" IDENTIFIED BY "),s("span",{pre:!0,attrs:{class:"token string"}},[n._v("'pass'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# wordpress install")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("apt")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v(" php-curl php-gd php-intl php-mbstring php-soap php-xml php-xmlrpc php-zip\n\n\nsystemctl restart php7.4-fpm\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);